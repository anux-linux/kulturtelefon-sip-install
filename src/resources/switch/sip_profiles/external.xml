<profile name="external">
  <gateways>
    <X-PRE-PROCESS cmd="include" data="external/*.xml"/>
  </gateways>

  <domains>
    <domain name="all" alias="false" parse="true"/>
  </domains>

  <settings>
    <!-- SIP: Bind to all interfaces for public internet access -->
    <param name="sip-ip" value="FREESWITCH_PUBLIC_IP_PLACEHOLDER"/>
    <param name="sip-port" value="5060"/>
    <param name="ext-sip-ip" value="FREESWITCH_PUBLIC_IP_PLACEHOLDER"/>

    <!-- RTP: Use public IP for media -->
    <param name="rtp-ip" value="FREESWITCH_PUBLIC_IP_PLACEHOLDER"/>
    <param name="ext-rtp-ip" value="FREESWITCH_PUBLIC_IP_PLACEHOLDER"/>

    <param name="dialplan" value="XML"/>
    <param name="context" value="public"/>
    <param name="dtmf-duration" value="2000"/>
    <param name="inbound-codec-prefs" value="OPUS,G722,PCMU,PCMA,G729"/>
    <param name="outbound-codec-prefs" value="OPUS,G722,PCMU,PCMA,G729"/>
    <param name="hold-music" value="$${hold_music}"/>
    <param name="rtp-timer-name" value="soft"/>
    <param name="local-network-acl" value="localnet.auto"/>
    <param name="manage-presence" value="false"/>
    <param name="inbound-codec-negotiation" value="generous"/>
    <param name="nonce-ttl" value="60"/>
    <param name="auth-calls" value="false"/>
    <param name="inbound-late-negotiation" value="true"/>
    <param name="inbound-zrtp-passthru" value="true"/>
    <param name="rtp-timeout-sec" value="300"/>
    <param name="rtp-hold-timeout-sec" value="1800"/>
    <param name="session-timeout" value="600"/>
    <param name="minimum-session-expires" value="90"/>
    <param name="tls" value="false"/>

    <!-- NAT traversal -->
    <param name="aggressive-nat-detection" value="true"/>
    <param name="NDLB-received-in-nat-reg-contact" value="true"/>
    <param name="NDLB-force-rport" value="true"/>
  </settings>
</profile>
